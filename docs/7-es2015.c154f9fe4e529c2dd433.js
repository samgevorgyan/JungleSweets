(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{GCp2:function(t,e,n){"use strict";n.r(e),n.d(e,"routes",function(){return tt}),n.d(e,"AdminModule",function(){return et});var i=n("ofXK"),o=n("mrSG"),a=n("quSY"),s=n("jTqx"),r=function(t){return t.aboutMeImage="aboutme-img",t.assortmentImage="assortment-img",t.sliderImg="slider-img",t}({}),c=n("fXoL"),m=n("nYR2"),d=n("JIr8"),l=n("lJxs"),b=n("z6cu"),g=n("HDdC"),u=n("Vaw3"),p=n("I/3d"),h=n("tyNb"),_=n("Avyq");let f=(()=>{class t{constructor(t,e,n,i){this.storage=t,this.afs=e,this.router=n,this.localize=i,this.isLogedin=!1}uploadFile(t,e){return new Promise(n=>{const i=`${e}/${(new Date).getTime()}_${t.name} `,o=this.storage.ref(i);o.put(t).snapshotChanges().pipe(Object(m.a)(()=>{o.getDownloadURL().subscribe(t=>{n(t)})}),Object(d.a)(t=>(this.permissionError(t),Object(b.a)(t)))).subscribe()})}imageRender(t){return new g.a(e=>{null==t.type.match(/image\/*/)&&e.error("only images are acceptable");const n=new FileReader;n.readAsDataURL(t),n.onload=t=>{e.next(n.result),e.complete()}})}setToDataBase(t,e){return this.afs.collection(e).add(t).catch(this.permissionError.bind(this))}updateDataBaseDocument(t,e){return this.afs.doc(e).update(t).catch(this.permissionError.bind(this))}getTest(t){this.afs.doc(t).valueChanges().subscribe(t=>{})}getCollectionFromDb(t){return this.afs.collection(t).snapshotChanges().pipe(Object(l.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}deleteImageFromStorage(t,e){return Object(o.a)(this,void 0,void 0,function*(){yield this.storage.storage.ref(t).storage.refFromURL(e).delete()})}permissionError(t){if(t.code.includes("permission-denied")||t.code.includes("storage/unauthorized")){const t=this.localize.translateRoute("/admin");this.router.navigate([t])}}}return t.\u0275fac=function(e){return new(e||t)(c.Ub(u.a),c.Ub(p.a),c.Ub(h.j),c.Ub(_.c))},t.\u0275prov=c.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=n("UbJi"),P=n("XiUz"),M=n("6NWb");function w(t,e){if(1&t){const t=c.Rb();c.Qb(0,"div",8),c.Mb(1,"img",9),c.Qb(2,"fa-icon",10),c.Yb("click",function(){c.qc(t);const n=e.$implicit,i=e.index,o=c.bc().ngIf;return c.bc().deleteFromSlider(n,o[0].id,o[0].urls,i)}),c.Pb(),c.Pb()}if(2&t){const t=e.$implicit;c.Bb(1),c.gc("src",t,c.tc)}}function C(t,e){if(1&t){const t=c.Rb();c.Qb(0,"div",2),c.Qb(1,"h1"),c.Bc(2,"Add or update slder image"),c.Pb(),c.Qb(3,"div"),c.Qb(4,"label",3),c.Bc(5," click on sheep to chose new img "),c.Mb(6,"img",4),c.Pb(),c.Qb(7,"input",5),c.Yb("change",function(n){c.qc(t);const i=e.ngIf;return c.bc().uploadAssortmentFiles(n,i[0].id,i[0].urls)}),c.Pb(),c.Pb(),c.Qb(8,"div",6),c.Ac(9,w,3,1,"div",7),c.Pb(),c.Pb()}if(2&t){const t=e.ngIf;c.Bb(9),c.gc("ngForOf",t[0].urls)}}let O=(()=>{class t{constructor(t,e){this.adminService=t,this.afAuth=e,this.subscription=new a.a}ngOnInit(){this.getSliderImages(s.a.sliderImg)}getSliderImages(t){this.sliderImageUrls$=this.adminService.getCollectionFromDb(t)}uploadAssortmentFiles(t,e,n){0!==t.target.files.length&&[...t.target.files].forEach(t=>{this.adminService.imageRender(t).subscribe(i=>{this.adminService.uploadFile(t,r.sliderImg).then(t=>Object(o.a)(this,void 0,void 0,function*(){n.push(t);const i=`${s.a.sliderImg}/${e}`;yield this.adminService.updateDataBaseDocument({urls:n},i)}))},t=>{alert(t)})})}deleteFromSlider(t,e,n,i){this.adminService.deleteImageFromStorage(r.sliderImg,t).then(t=>Object(o.a)(this,void 0,void 0,function*(){n.splice(i,1);const t=`${s.a.sliderImg}/${e}`;yield this.adminService.updateDataBaseDocument({urls:n},t)}))}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(f),c.Lb(x.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["jungle-admin"]],decls:3,vars:3,consts:[[1,"admin_container"],["class","add_slider_img","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px",1,"add_slider_img"],["for","sliderImg",1,"typeFileLabel"],["src","../../../assets/img/admin/chose-file.gif","alt",""],["type","file","id","sliderImg",3,"change"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px"],["class","slider_images",4,"ngFor","ngForOf"],[1,"slider_images"],["alt","slide_img",3,"src"],["icon","times-circle",3,"click"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Ac(1,C,10,1,"div",1),c.cc(2,"async"),c.Pb()),2&t&&(c.Bb(1),c.gc("ngIf",c.dc(2,1,e.sliderImageUrls$)))},directives:[i.k,P.e,P.d,P.f,i.j,M.a],pipes:[i.b],styles:[".admin_container[_ngcontent-%COMP%]{background-color:#fff;margin:auto;width:1280px}@media (min-width:1280px) and (max-width:1399px){.admin_container[_ngcontent-%COMP%]{width:1200px}}@media (min-width:960px) and (max-width:1279px){.admin_container[_ngcontent-%COMP%]{width:900px}}@media (min-width:600px) and (max-width:959px){.admin_container[_ngcontent-%COMP%]{width:600px}}@media (max-width:599px){.admin_container[_ngcontent-%COMP%]{width:100%}}.admin_container[_ngcontent-%COMP%]   .add_slider_img[_ngcontent-%COMP%]{padding:20px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.admin_container[_ngcontent-%COMP%]   .add_slider_img[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]{width:200px;height:200px;position:relative}.admin_container[_ngcontent-%COMP%]   .add_slider_img[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.admin_container[_ngcontent-%COMP%]   .add_slider_img[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;color:red;cursor:pointer}"]}),t})();var v=n("sYmb"),I=n("bGsp");let Q=(()=>{class t{static isString(t){return"string"==typeof t||t instanceof String}static caseInsensitiveSort(e,n){return t.isString(e)&&t.isString(n)?e.localeCompare(n):t.defaultCompare(e,n)}static defaultCompare(t,e){return t&&t instanceof Date&&(t=t.getTime()),e&&e instanceof Date&&(e=e.getTime()),t===e?0:null==t?1:null==e?-1:t>e?1:-1}static parseExpression(t){return(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".")}static getValue(t,e){for(let n=0,i=e.length;n<i;++n){if(!t)return;const i=e[n];if(!(i in t))return;t="function"==typeof t[i]?t[i]():t[i]}return t}static setValue(t,e,n){let i;for(i=0;i<n.length-1;i++)t=t[n[i]];t[n[i]]=e}transform(t,e,n,i=!1,o){return t?Array.isArray(e)?this.multiExpressionTransform(t,e,n,i,o):Array.isArray(t)?this.sortArray(t.slice(),e,n,i,o):"object"==typeof t?this.transformObject(Object.assign({},t),e,n,i,o):t:t}sortArray(e,n,i,o,a){const s=n&&-1!==n.indexOf(".");let r;s&&(n=t.parseExpression(n)),r=a&&"function"==typeof a?a:o?t.caseInsensitiveSort:t.defaultCompare;const c=e.sort((e,i)=>n?s?r(t.getValue(e,n),t.getValue(i,n)):e&&i?r(e[n],i[n]):r(e,i):r(e,i));return i?c.reverse():c}transformObject(e,n,i,o,a){const s=t.parseExpression(n);let r=s.pop(),c=t.getValue(e,s);return Array.isArray(c)||(s.push(r),r=null,c=t.getValue(e,s)),c?(t.setValue(e,this.transform(c,r,i,o),s),e):e}multiExpressionTransform(t,e,n,i=!1,o){return e.reverse().reduce((t,e)=>this.transform(t,e,n,i,o),t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Kb({name:"orderBy",type:t,pure:!1}),t})(),B=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},providers:[Q]}),t})();var y=n("3Pt+"),A=n("kmnG"),F=n("qFsG"),L=n("bTqV");function k(t,e){1&t&&(c.Qb(0,"mat-error"),c.Bc(1," Please enter a valid email address "),c.Pb())}function S(t,e){1&t&&(c.Qb(0,"mat-error"),c.Bc(1," Email is "),c.Qb(2,"strong"),c.Bc(3,"required"),c.Pb(),c.Pb())}function D(t,e){1&t&&(c.Qb(0,"mat-error"),c.Bc(1," Password is "),c.Qb(2,"strong"),c.Bc(3,"required"),c.Pb(),c.Pb())}let T=(()=>{class t{constructor(t,e,n,i,o){this.fb=t,this.adminService=e,this.router=n,this.route=i,this.afAuth=o,this.adminLoginForm=this.fb.group({emailForm:["",[y.n.required,y.n.email]],passwordForm:["",y.n.required]})}ngOnInit(){this.afAuth.signOut()}get email(){return this.adminLoginForm.get("emailForm")}get password(){return this.adminLoginForm.get("passwordForm")}logIn(){this.afAuth.signInWithEmailAndPassword(this.email.value,this.password.value).then(t=>{t.user&&(this.adminService.isLogedin=!0,this.router.navigate(["./main"],{relativeTo:this.route}))}).catch(t=>{console.log("error",t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(y.b),c.Lb(f),c.Lb(h.j),c.Lb(h.a),c.Lb(x.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["jungle-login"]],decls:15,vars:4,consts:[[1,"admin_login_container"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","30px",3,"formGroup","ngSubmit"],[1,"example-full-width"],["matInput","","formControlName","emailForm","placeholder","enter Email"],[4,"ngIf"],["matInput","","formControlName","passwordForm","placeholder","enter Password"],["mat-raised-button","","color","accent"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"form",1),c.Yb("ngSubmit",function(){return e.logIn()}),c.Qb(2,"mat-form-field",2),c.Qb(3,"mat-label"),c.Bc(4,"Email"),c.Pb(),c.Mb(5,"input",3),c.Ac(6,k,2,0,"mat-error",4),c.Ac(7,S,4,0,"mat-error",4),c.Pb(),c.Qb(8,"mat-form-field",2),c.Qb(9,"mat-label"),c.Bc(10,"Password"),c.Pb(),c.Mb(11,"input",5),c.Ac(12,D,4,0,"mat-error",4),c.Pb(),c.Qb(13,"button",6),c.Bc(14,"Log in"),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.Bb(1),c.gc("formGroup",e.adminLoginForm),c.Bb(5),c.gc("ngIf",e.email.hasError("email")&&!e.email.hasError("required")),c.Bb(1),c.gc("ngIf",e.email.hasError("required")),c.Bb(5),c.gc("ngIf",e.password.hasError("required")))},directives:[y.o,y.i,P.e,P.d,P.f,y.d,A.c,A.f,F.a,y.a,y.h,y.c,i.k,L.a,A.b],styles:[".admin_login_container[_ngcontent-%COMP%]{background-color:#fff;margin:auto;min-height:calc(100% - 371px);width:1280px}@media (min-width:1280px) and (max-width:1399px){.admin_login_container[_ngcontent-%COMP%]{width:1200px}}@media (min-width:960px) and (max-width:1279px){.admin_login_container[_ngcontent-%COMP%]{width:900px}}@media (min-width:600px) and (max-width:959px){.admin_login_container[_ngcontent-%COMP%]{width:600px}}@media (max-width:599px){.admin_login_container[_ngcontent-%COMP%]{width:100%}}"]}),t})(),U=(()=>{class t{constructor(t,e,n,i){this.adminService=t,this.router=e,this.route=n,this.localize=i}canActivate(t,e){if(this.adminService.isLogedin)return!0;{const t=this.localize.translateRoute("/admin");return this.router.navigate([t]),!1}}}return t.\u0275fac=function(e){return new(e||t)(c.Ub(f),c.Ub(h.j),c.Ub(h.a),c.Ub(_.c))},t.\u0275prov=c.Hb({token:t,factory:t.\u0275fac}),t})();var E=n("ihCf");function Y(t,e){if(1&t){const t=c.Rb();c.Qb(0,"div",11),c.Mb(1,"img",12),c.Qb(2,"fa-icon",13),c.Yb("click",function(){c.qc(t);const e=c.bc();return e.deleteAboutMeImage(null==e.aboutMe?null:e.aboutMe.url)}),c.Pb(),c.Pb()}if(2&t){const t=c.bc();c.Bb(1),c.gc("src",null==t.aboutMe?null:t.aboutMe.url,c.tc)}}let j=(()=>{class t{constructor(t){this.adminService=t,this.uploadedFiles=[],this.oldRealImageUrl=""}ngOnInit(){this.getAboutMe("about-me")}uploadAboutMeImage(t){0!==t.target.files.length&&[...t.target.files].forEach(t=>{this.uploadedFiles.push(t),this.adminService.imageRender(t).subscribe(t=>{this.oldRealImageUrl=this.aboutMe.url,this.aboutMe.url=t},t=>{alert(t)})})}deleteAboutMeImage(t){this.aboutMe.url="",this.uploadedFiles=[],t.includes("base64")||(this.oldRealImageUrl=t)}saveAboutMe(t){return Object(o.a)(this,void 0,void 0,function*(){0!==this.uploadedFiles.length&&(this.aboutMe.url=yield this.adminService.uploadFile(this.uploadedFiles[0],r.aboutMeImage)),this.oldRealImageUrl&&this.adminService.deleteImageFromStorage(r.aboutMeImage,this.oldRealImageUrl).then(t=>{});const e={aboutme:{am:this.aboutMe.aboutme.am,en:this.aboutMe.aboutme.en},url:this.aboutMe.url};if(t){const n=`${s.a.aboutMe}/${t}`;yield this.adminService.updateDataBaseDocument(e,n)}else yield this.adminService.setToDataBase(e,s.a.aboutMe)})}getAboutMe(t){this.adminService.getCollectionFromDb(t).subscribe(t=>{this.aboutMe=t[0]})}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(f))},t.\u0275cmp=c.Fb({type:t,selectors:[["jungle-about-me"]],decls:21,vars:3,consts:[[1,"about_me_cont"],[1,"about_me"],["fxLayout","row","fxLayoutAlign","center start","fxLayoutGap","10px"],["fxFlex","40","fxFlex.xs","100",1,"am_desc"],["matInput","","cdkTextareaAutosize","","rows","5",3,"ngModel","ngModelChange"],["for","aboutMeImg",1,"typeFileLabel"],["src","../../../../assets/img/admin/chose-file.gif","alt","chose about me image"],["type","file","id","aboutMeImg",3,"change"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px"],["class","slider_images",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],[1,"slider_images"],["alt","About me image",3,"src"],["icon","times-circle",3,"click"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"h1"),c.Bc(3,"About me"),c.Pb(),c.Qb(4,"div",2),c.Qb(5,"mat-form-field",3),c.Qb(6,"mat-label"),c.Bc(7,"About me in Armenian"),c.Pb(),c.Qb(8,"textarea",4),c.Yb("ngModelChange",function(t){return(null==e.aboutMe?null:e.aboutMe.aboutme).am=t}),c.Pb(),c.Pb(),c.Qb(9,"mat-form-field",3),c.Qb(10,"mat-label"),c.Bc(11,"About me in English"),c.Pb(),c.Qb(12,"textarea",4),c.Yb("ngModelChange",function(t){return(null==e.aboutMe?null:e.aboutMe.aboutme).en=t}),c.Pb(),c.Pb(),c.Pb(),c.Qb(13,"label",5),c.Bc(14," click on sheep to chose new img "),c.Mb(15,"img",6),c.Pb(),c.Qb(16,"input",7),c.Yb("change",function(t){return e.uploadAboutMeImage(t)}),c.Pb(),c.Qb(17,"div",8),c.Ac(18,Y,3,1,"div",9),c.Pb(),c.Qb(19,"button",10),c.Yb("click",function(){return e.saveAboutMe(null==e.aboutMe?null:e.aboutMe.id)}),c.Bc(20,"Save about me"),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.Bb(8),c.gc("ngModel",null==e.aboutMe?null:e.aboutMe.aboutme.am),c.Bb(4),c.gc("ngModel",null==e.aboutMe?null:e.aboutMe.aboutme.en),c.Bb(6),c.gc("ngIf",""!==(null==e.aboutMe?null:e.aboutMe.url)))},directives:[P.e,P.d,P.f,A.c,P.b,A.f,F.a,E.b,y.a,y.h,y.k,i.k,L.a,M.a],styles:[".about_me_cont[_ngcontent-%COMP%]{width:1280px;background-color:#fff;margin:auto;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media (min-width:1280px) and (max-width:1399px){.about_me_cont[_ngcontent-%COMP%]{width:1200px}}@media (min-width:960px) and (max-width:1279px){.about_me_cont[_ngcontent-%COMP%]{width:900px}}@media (min-width:600px) and (max-width:959px){.about_me_cont[_ngcontent-%COMP%]{width:600px}}@media (max-width:599px){.about_me_cont[_ngcontent-%COMP%]{width:100%}}.about_me_cont[_ngcontent-%COMP%]   .about_me[_ngcontent-%COMP%]{padding:20px;margin-top:20px}.about_me_cont[_ngcontent-%COMP%]   .about_me[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]{width:200px;height:200px;position:relative}.about_me_cont[_ngcontent-%COMP%]   .about_me[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.about_me_cont[_ngcontent-%COMP%]   .about_me[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;color:red;cursor:pointer}"]}),t})();var q=n("Xa2L"),R=n("Wp6s");function $(t,e){if(1&t){const t=c.Rb();c.Qb(0,"button",23),c.Yb("click",function(){return c.qc(t),c.bc().amTitle=""}),c.Mb(1,"fa-icon",24),c.Pb()}}function G(t,e){if(1&t){const t=c.Rb();c.Qb(0,"button",23),c.Yb("click",function(){return c.qc(t),c.bc().enTitle=""}),c.Mb(1,"fa-icon",24),c.Pb()}}function N(t,e){if(1&t){const t=c.Rb();c.Qb(0,"button",23),c.Yb("click",function(){return c.qc(t),c.bc().amTitle=""}),c.Mb(1,"fa-icon",24),c.Pb()}}function V(t,e){if(1&t){const t=c.Rb();c.Qb(0,"div",25),c.Qb(1,"mat-form-field"),c.Qb(2,"mat-label"),c.Bc(3,"Assortment Armenian name"),c.Pb(),c.Qb(4,"input",26),c.Yb("ngModelChange",function(n){c.qc(t);const i=e.index;return c.bc().assortmentsImages[i].name.am=n}),c.Pb(),c.Pb(),c.Qb(5,"mat-form-field"),c.Qb(6,"mat-label"),c.Bc(7,"Assortment English name"),c.Pb(),c.Qb(8,"input",26),c.Yb("ngModelChange",function(n){c.qc(t);const i=e.index;return c.bc().assortmentsImages[i].name.en=n}),c.Pb(),c.Pb(),c.Qb(9,"mat-form-field"),c.Qb(10,"mat-label"),c.Bc(11,"Assortment price"),c.Pb(),c.Qb(12,"input",27),c.Yb("ngModelChange",function(n){c.qc(t);const i=e.index;return c.bc().assortmentsImages[i].price=n}),c.Pb(),c.Pb(),c.Qb(13,"div",28),c.Mb(14,"img",29),c.Qb(15,"fa-icon",30),c.Yb("click",function(){c.qc(t);const n=e.index,i=e.$implicit;return c.bc().deleteAssortmentImage(n,i.url)}),c.Pb(),c.Qb(16,"input",31),c.Yb("change",function(){c.qc(t);const n=e.index;return c.bc().makeMainImage(n)}),c.Pb(),c.Pb(),c.Pb()}if(2&t){const t=e.$implicit,n=e.index,i=c.bc();c.Bb(4),c.hc("name","inputArm",n,""),c.gc("ngModel",i.assortmentsImages[n].name.am),c.Bb(4),c.hc("name","inputEn",n,""),c.gc("ngModel",i.assortmentsImages[n].name.en),c.Bb(4),c.hc("name","inputPrice",n,""),c.gc("ngModel",i.assortmentsImages[n].price),c.Bb(2),c.gc("src",t.url,c.tc),c.Bb(2),c.gc("checked",t.main)}}function z(t,e){1&t&&c.Mb(0,"mat-spinner",34)}function J(t,e){if(1&t){const t=c.Rb();c.Qb(0,"button",32),c.Yb("click",function(){return c.qc(t),c.bc().addNewAssortmentFunc()}),c.Bc(1," Add new assortment "),c.Ac(2,z,1,0,"mat-spinner",33),c.Pb()}if(2&t){const t=c.bc();c.Bb(2),c.gc("ngIf",t.isLoading)}}function X(t,e){1&t&&c.Mb(0,"mat-spinner",34)}function H(t,e){if(1&t){const t=c.Rb();c.Qb(0,"button",32),c.Yb("click",function(){return c.qc(t),c.bc().addNewAssortmentFunc()}),c.Bc(1," Update assortment "),c.Ac(2,X,1,0,"mat-spinner",33),c.Pb()}if(2&t){const t=c.bc();c.Bb(2),c.gc("ngIf",t.isLoading)}}function W(t,e){if(1&t&&c.Mb(0,"input",43),2&t){const t=c.bc().$implicit;c.gc("checked",t.main)}}function K(t,e){if(1&t&&(c.Qb(0,"div",39),c.Qb(1,"mat-card",40),c.Qb(2,"mat-card-header"),c.Ac(3,W,1,1,"input",41),c.Qb(4,"mat-card-title"),c.Bc(5),c.Pb(),c.Qb(6,"mat-card-title"),c.Bc(7),c.Pb(),c.Qb(8,"mat-card-subtitle"),c.Bc(9),c.Pb(),c.Pb(),c.Mb(10,"img",42),c.Pb(),c.Pb()),2&t){const t=e.$implicit;c.Bb(3),c.gc("ngIf",t.main),c.Bb(2),c.Cc(t.name.am),c.Bb(2),c.Cc(t.name.en),c.Bb(2),c.Cc(t.price),c.Bb(1),c.gc("src",t.url,c.tc)}}function Z(t,e){if(1&t){const t=c.Rb();c.Qb(0,"div",35),c.Qb(1,"button",36),c.Yb("click",function(){c.qc(t);const n=e.$implicit,i=c.bc(),o=c.nc(2);return i.editAssortment(n,o)}),c.Bc(2," Edit "),c.Pb(),c.Qb(3,"h3"),c.Bc(4,"Title Armenian"),c.Pb(),c.Qb(5,"p"),c.Bc(6),c.Pb(),c.Qb(7,"h3"),c.Bc(8,"Title English"),c.Pb(),c.Qb(9,"p"),c.Bc(10),c.Pb(),c.Qb(11,"h3"),c.Bc(12,"Description Armenian"),c.Pb(),c.Qb(13,"p"),c.Bc(14),c.Pb(),c.Qb(15,"h3"),c.Bc(16,"Description English"),c.Pb(),c.Qb(17,"p"),c.Bc(18),c.Pb(),c.Qb(19,"h3"),c.Bc(20,"price"),c.Pb(),c.Qb(21,"p"),c.Bc(22),c.Pb(),c.Qb(23,"h3"),c.Bc(24,"puctures"),c.Pb(),c.Qb(25,"div",37),c.Ac(26,K,11,5,"div",38),c.Pb(),c.Pb()}if(2&t){const t=e.$implicit;c.Bb(6),c.Cc(t.title.am),c.Bb(4),c.Cc(t.title.en),c.Bb(4),c.Cc(t.description.am),c.Bb(4),c.Cc(t.description.en),c.Bb(4),c.Cc(t.price),c.Bb(4),c.gc("ngForOf",t.urls)}}const tt=[{path:"",component:T},{path:"main",component:O},{path:"about",component:j},{path:"assortments",component:(()=>{class t{constructor(t,e){this.adminService=t,this.platformId=e,this.assortments=[],this.assortmentsImages=[],this.amTitle="",this.enTitle="",this.enDescription="",this.amDescription="",this.uploadedFiles=[],this.price="",this.deletedUrls=[],this.idForUpdate=null,this.isLoading=!1}ngOnInit(){Object(i.r)(this.platformId)&&this.getAssortments(s.a.assortments)}getAssortments(t){this.adminService.getCollectionFromDb(t).subscribe(t=>{this.assortments=[...t]})}uploadAssortmentFiles(t,e){0!==t.target.files.length&&[...t.target.files].forEach(t=>{this.uploadedFiles.push(t),this.adminService.imageRender(t).subscribe(t=>{this.assortmentsImages.push({url:t,main:!1,name:{am:"",en:""},price:""})},t=>{alert(t)})})}manageUrls(){return new Promise(t=>{Promise.all(this.uploadedFiles.map((t,e)=>this.adminService.uploadFile(t,r.assortmentImage))).then(e=>{const n=this.assortmentsImages.length-this.uploadedFiles.length;e.forEach((t,e)=>{this.assortmentsImages[e+n].url=t}),t("")})})}addNewAssortmentFunc(){return Object(o.a)(this,void 0,void 0,function*(){this.isLoading=!0,""!==this.amTitle&&""!==this.enTitle&&""!==this.enDescription&&""!==this.amDescription&&""!==this.price&&(0!==this.uploadedFiles.length&&(yield this.manageUrls()),this.addNewAssortment={title:{am:this.amTitle?this.amTitle:"",en:this.enTitle?this.enTitle:""},description:{am:this.amDescription,en:this.enDescription},price:this.price,urls:this.assortmentsImages},null===this.idForUpdate?this.adminService.setToDataBase(this.addNewAssortment,s.a.assortments).then(t=>{this.isLoading=!1,this.resetForm()}):this.adminService.updateDataBaseDocument(this.addNewAssortment,`${s.a.assortments}/${this.idForUpdate}`).then(t=>{0!==this.deletedUrls.length?this.deletedUrls.forEach(t=>{this.adminService.deleteImageFromStorage(r.assortmentImage,t).then(t=>{this.isLoading=!1,this.resetForm()})}):(this.isLoading=!1,this.resetForm())}))})}resetForm(){this.amTitle="",this.enTitle="",this.amDescription="",this.enDescription="",this.price="",this.assortmentsImages=[],this.idForUpdate=null,this.assortmentUploadInput="",this.uploadedFiles=[],this.deletedUrls=[]}editAssortment(t,e){this.amTitle=t.title.am,this.enTitle=t.title.en,this.amDescription=t.description.am,this.enDescription=t.description.en,this.price=t.price,this.assortmentsImages=[...t.urls],this.idForUpdate=t.id,e.scrollIntoView()}makeMainImage(t){this.assortmentsImages.forEach(t=>{t.main=!1}),this.assortmentsImages[t].main=!0}deleteAssortment(t,e,n){}deleteAssortmentImage(t,e){const n=this.assortmentsImages.length-this.uploadedFiles.length;this.assortmentsImages.splice(t,1),e.includes("base64")?this.uploadedFiles.splice(t-n,1):this.deletedUrls.push(e)}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(f),c.Lb(c.B))},t.\u0275cmp=c.Fb({type:t,selectors:[["jungle-assortment"]],decls:45,vars:14,consts:[[1,"assortment_cont"],[1,"add_new_assortment_cont"],["formDiv",""],[1,"add_new_assortment"],[1,"assortment_title"],[1,"am_title"],["matInput","","type","text",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"en_title"],["fxLayout","row wrap","fxLayoutAlign","center center","fxLayoutGap","20px",1,"assortment_desc"],[1,"am_desc"],["matInput","","cdkTextareaAutosize","","rows","5",3,"ngModel","ngModelChange"],[1,"en_desc"],[1,"price"],[1,"upload_assortment_img"],["for","assortmentImg",1,"typeFileLabel"],["src","../../../../assets/img/admin/chose-file.gif","alt",""],["type","file","id","assortmentImg",3,"multiple","ngModel","ngModelChange","change"],["fxLayout","row wrap","fxLayoutAlign","center center","fxLayoutGap","20px"],["fxLayout","column","fxLayoutAlign","center center","class","delete_assortment_image_div",4,"ngFor","ngForOf"],["class","add_new_assortment_button","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"assortment_show_part_cont"],["class","assortment_show_div",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["icon","times-circle"],["fxLayout","column","fxLayoutAlign","center center",1,"delete_assortment_image_div"],["matInput","","type","text",3,"name","ngModel","ngModelChange"],["matInput","","type","number",3,"name","ngModel","ngModelChange"],[1,"images_div"],["alt","",3,"src"],["icon","times-circle",3,"click"],["type","checkbox",3,"checked","change"],["mat-raised-button","","color","primary",1,"add_new_assortment_button",3,"click"],["color","accent",4,"ngIf"],["color","accent"],[1,"assortment_show_div"],["mat-raised-button","","color","accent",3,"click"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px"],["class","assortment_show_image_div",4,"ngFor","ngForOf"],[1,"assortment_show_image_div"],[1,"example-card"],["type","checkbox",3,"checked",4,"ngIf"],["mat-card-image","","alt","picture",3,"src"],["type","checkbox",3,"checked"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1,2),c.Qb(3,"h1"),c.Bc(4,"Add new assortment"),c.Pb(),c.Qb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"mat-form-field",5),c.Qb(8,"mat-label"),c.Bc(9,"Title Armenian "),c.Pb(),c.Qb(10,"input",6),c.Yb("ngModelChange",function(t){return e.amTitle=t}),c.Pb(),c.Ac(11,$,2,0,"button",7),c.Pb(),c.Qb(12,"mat-form-field",8),c.Qb(13,"mat-label"),c.Bc(14,"Title English "),c.Pb(),c.Qb(15,"input",6),c.Yb("ngModelChange",function(t){return e.enTitle=t}),c.Pb(),c.Ac(16,G,2,0,"button",7),c.Pb(),c.Pb(),c.Qb(17,"div",9),c.Qb(18,"mat-form-field",10),c.Qb(19,"mat-label"),c.Bc(20,"Description in Armenian"),c.Pb(),c.Qb(21,"textarea",11),c.Yb("ngModelChange",function(t){return e.amDescription=t}),c.Pb(),c.Pb(),c.Qb(22,"mat-form-field",12),c.Qb(23,"mat-label"),c.Bc(24,"Description in English"),c.Pb(),c.Qb(25,"textarea",11),c.Yb("ngModelChange",function(t){return e.enDescription=t}),c.Pb(),c.Pb(),c.Pb(),c.Qb(26,"div",13),c.Qb(27,"mat-form-field",5),c.Qb(28,"mat-label"),c.Bc(29,"Price in AMD "),c.Pb(),c.Qb(30,"input",6),c.Yb("ngModelChange",function(t){return e.price=t}),c.Pb(),c.Ac(31,N,2,0,"button",7),c.Pb(),c.Pb(),c.Qb(32,"div",14),c.Qb(33,"label",15),c.Bc(34," click on sheep to chose new img "),c.Mb(35,"img",16),c.Pb(),c.Qb(36,"input",17),c.Yb("ngModelChange",function(t){return e.assortmentUploadInput=t})("change",function(t){return e.uploadAssortmentFiles(t,"assortment-img")}),c.Pb(),c.Qb(37,"div",18),c.Ac(38,V,17,8,"div",19),c.Pb(),c.Pb(),c.Pb(),c.Ac(39,J,3,1,"button",20),c.Ac(40,H,3,1,"button",20),c.Pb(),c.Qb(41,"div",21),c.Qb(42,"h1"),c.Bc(43,"Existing assortment"),c.Pb(),c.Ac(44,Z,27,6,"div",22),c.Pb(),c.Pb()),2&t&&(c.Bb(10),c.gc("ngModel",e.amTitle),c.Bb(1),c.gc("ngIf",e.amTitle),c.Bb(4),c.gc("ngModel",e.enTitle),c.Bb(1),c.gc("ngIf",e.enTitle),c.Bb(5),c.gc("ngModel",e.amDescription),c.Bb(4),c.gc("ngModel",e.enDescription),c.Bb(5),c.gc("ngModel",e.price),c.Bb(1),c.gc("ngIf",e.amTitle),c.Bb(5),c.gc("multiple",!0)("ngModel",e.assortmentUploadInput),c.Bb(2),c.gc("ngForOf",e.assortmentsImages),c.Bb(1),c.gc("ngIf",null===e.idForUpdate),c.Bb(1),c.gc("ngIf",null!==e.idForUpdate),c.Bb(4),c.gc("ngForOf",e.assortments))},directives:[A.c,A.f,F.a,y.a,y.h,y.k,i.k,P.e,P.d,P.f,E.b,i.j,L.a,A.g,M.a,y.l,q.b,R.a,R.c,R.g,R.f,R.d],styles:[".assortment_cont[_ngcontent-%COMP%]{width:1280px;background-color:#fff;margin:auto;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media (min-width:1280px) and (max-width:1399px){.assortment_cont[_ngcontent-%COMP%]{width:1200px}}@media (min-width:960px) and (max-width:1279px){.assortment_cont[_ngcontent-%COMP%]{width:900px}}@media (min-width:600px) and (max-width:959px){.assortment_cont[_ngcontent-%COMP%]{width:600px}}@media (max-width:599px){.assortment_cont[_ngcontent-%COMP%]{width:100%}}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]{padding:20px;margin:20px 0;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .assortment_title[_ngcontent-%COMP%]   .am_title[_ngcontent-%COMP%]{margin-right:30px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .assortment_desc[_ngcontent-%COMP%]   .am_desc[_ngcontent-%COMP%], .assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .assortment_desc[_ngcontent-%COMP%]   .en_desc[_ngcontent-%COMP%]{width:40%;min-width:200px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]{width:200px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]   .images_div[_ngcontent-%COMP%]{position:relative;height:200px;padding:5px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]   .images_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #ddd;border-radius:4px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]   .images_div[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;color:red;cursor:pointer}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]   .images_div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;left:5px;bottom:10px}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]{padding:20px}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]{padding:20px;margin:20px 0;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:20px}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]   .assortment_show_image_div[_ngcontent-%COMP%]{width:250px;position:relative}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]   .assortment_show_image_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]   .assortment_show_image_div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;left:5px;bottom:10px}button[_ngcontent-%COMP%]{position:relative}  mat-spinner{position:absolute!important;top:0;left:0;bottom:0;right:0;margin:auto}  mat-spinner,   mat-spinner svg{width:20px!important;height:20px!important}"]}),t})()}];let et=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},providers:[U],imports:[[i.c,h.m.forChild(tt),v.b.forChild(),I.a,B,y.e]]}),t})()}}]);