(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{GCp2:function(t,e,n){"use strict";n.r(e),n.d(e,"routes",function(){return tt}),n.d(e,"AdminModule",function(){return et});var i=n("ofXK"),o=n("mrSG"),a=n("jqqC"),s=n("jTqx"),r=function(t){return t.aboutMeImage="aboutme-img",t.assortmentImage="assortment-img",t.sliderImg="slider-img",t}({}),c=n("fXoL"),m=n("BjsQ"),d=n("VZwH"),l=n("rdQv"),b=n("lhB6"),u=n("SIQg"),g=n("Vaw3"),p=n("I/3d"),h=n("tyNb"),_=n("Avyq");let f=(()=>{class t{constructor(t,e,n,i){this.storage=t,this.afs=e,this.router=n,this.localize=i,this.isLogedin=!1}uploadFile(t,e){return new Promise(n=>{const i=`${e}/${(new Date).getTime()}_${t.name} `,o=this.storage.ref(i);o.put(t).snapshotChanges().pipe(Object(m.a)(()=>{o.getDownloadURL().subscribe(t=>{n(t)})}),Object(d.a)(t=>(this.permissionError(t),Object(b.a)(t)))).subscribe()})}imageRender(t){return new u.a(e=>{null==t.type.match(/image\/*/)&&e.error("only images are acceptable");const n=new FileReader;n.readAsDataURL(t),n.onload=t=>{e.next(n.result),e.complete()}})}setToDataBase(t,e){return this.afs.collection(e).add(t).catch(this.permissionError.bind(this))}updateDataBaseDocument(t,e){return this.afs.doc(e).update(t).catch(this.permissionError.bind(this))}getTest(t){this.afs.doc(t).valueChanges().subscribe(t=>{})}getCollectionFromDb(t){return this.afs.collection(t).snapshotChanges().pipe(Object(l.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}deleteImageFromStorage(t,e){return Object(o.b)(this,void 0,void 0,function*(){yield this.storage.storage.ref(t).storage.refFromURL(e).delete()})}permissionError(t){if(t.code.includes("permission-denied")||t.code.includes("storage/unauthorized")){const t=this.localize.translateRoute("/admin");this.router.navigate([t])}}}return t.\u0275fac=function(e){return new(e||t)(c.Wb(g.a),c.Wb(p.a),c.Wb(h.j),c.Wb(_.c))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=n("UbJi"),M=n("XiUz"),C=n("6NWb");function w(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",8),c.Ob(1,"img",9),c.Sb(2,"fa-icon",10),c.ac("click",function(){c.uc(t);const n=e.$implicit,i=e.index,o=c.ec().ngIf;return c.ec().deleteFromSlider(n,o[0].id,o[0].urls,i)}),c.Rb(),c.Rb()}if(2&t){const t=e.$implicit;c.Db(1),c.kc("src",t,c.xc)}}function O(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",2),c.Sb(1,"h1"),c.Dc(2,"Add or update slder image"),c.Rb(),c.Sb(3,"div"),c.Sb(4,"label",3),c.Dc(5," click on sheep to chose new img "),c.Ob(6,"img",4),c.Rb(),c.Sb(7,"input",5),c.ac("change",function(n){c.uc(t);const i=e.ngIf;return c.ec().uploadAssortmentFiles(n,i[0].id,i[0].urls)}),c.Rb(),c.Rb(),c.Sb(8,"div",6),c.Cc(9,w,3,1,"div",7),c.Rb(),c.Rb()}if(2&t){const t=e.ngIf;c.Db(9),c.kc("ngForOf",t[0].urls)}}let S=(()=>{class t{constructor(t,e){this.adminService=t,this.afAuth=e,this.subscription=new a.a}ngOnInit(){this.getSliderImages(s.a.sliderImg)}getSliderImages(t){this.sliderImageUrls$=this.adminService.getCollectionFromDb(t)}uploadAssortmentFiles(t,e,n){0!==t.target.files.length&&[...t.target.files].forEach(t=>{this.adminService.imageRender(t).subscribe(i=>{this.adminService.uploadFile(t,r.sliderImg).then(t=>Object(o.b)(this,void 0,void 0,function*(){n.push(t);const i=`${s.a.sliderImg}/${e}`;yield this.adminService.updateDataBaseDocument({urls:n},i)}))},t=>{alert(t)})})}deleteFromSlider(t,e,n,i){this.adminService.deleteImageFromStorage(r.sliderImg,t).then(t=>Object(o.b)(this,void 0,void 0,function*(){n.splice(i,1);const t=`${s.a.sliderImg}/${e}`;yield this.adminService.updateDataBaseDocument({urls:n},t)}))}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(f),c.Nb(x.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["jungle-admin"]],decls:3,vars:3,consts:[[1,"admin_container"],["class","add_slider_img","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px",1,"add_slider_img"],["for","sliderImg",1,"typeFileLabel"],["src","../../../assets/img/admin/chose-file.gif","alt",""],["type","file","id","sliderImg",3,"change"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px"],["class","slider_images",4,"ngFor","ngForOf"],[1,"slider_images"],["alt","slide_img",3,"src"],["icon","times-circle",3,"click"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Cc(1,O,10,1,"div",1),c.fc(2,"async"),c.Rb()),2&t&&(c.Db(1),c.kc("ngIf",c.gc(2,1,e.sliderImageUrls$)))},directives:[i.k,M.e,M.d,M.f,i.j,C.a],pipes:[i.b],styles:[".admin_container[_ngcontent-%COMP%]{background-color:#fff;margin:auto;width:1280px}@media (min-width:1280px) and (max-width:1399px){.admin_container[_ngcontent-%COMP%]{width:1200px}}@media (min-width:960px) and (max-width:1279px){.admin_container[_ngcontent-%COMP%]{width:900px}}@media (min-width:600px) and (max-width:959px){.admin_container[_ngcontent-%COMP%]{width:600px}}@media (max-width:599px){.admin_container[_ngcontent-%COMP%]{width:100%}}.admin_container[_ngcontent-%COMP%]   .add_slider_img[_ngcontent-%COMP%]{padding:20px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.admin_container[_ngcontent-%COMP%]   .add_slider_img[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]{width:200px;height:200px;position:relative}.admin_container[_ngcontent-%COMP%]   .add_slider_img[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.admin_container[_ngcontent-%COMP%]   .add_slider_img[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;color:red;cursor:pointer}"]}),t})();var v=n("sYmb"),D=n("bGsp");let P=(()=>{class t{static isString(t){return"string"==typeof t||t instanceof String}static caseInsensitiveSort(e,n){return t.isString(e)&&t.isString(n)?e.localeCompare(n):t.defaultCompare(e,n)}static defaultCompare(t,e){return t&&t instanceof Date&&(t=t.getTime()),e&&e instanceof Date&&(e=e.getTime()),t===e?0:null==t?1:null==e?-1:t>e?1:-1}static parseExpression(t){return(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".")}static getValue(t,e){for(let n=0,i=e.length;n<i;++n){if(!t)return;const i=e[n];if(!(i in t))return;t="function"==typeof t[i]?t[i]():t[i]}return t}static setValue(t,e,n){let i;for(i=0;i<n.length-1;i++)t=t[n[i]];t[n[i]]=e}transform(t,e,n,i=!1,o){return t?Array.isArray(e)?this.multiExpressionTransform(t,e,n,i,o):Array.isArray(t)?this.sortArray(t.slice(),e,n,i,o):"object"==typeof t?this.transformObject(Object.assign({},t),e,n,i,o):t:t}sortArray(e,n,i,o,a){const s=n&&-1!==n.indexOf(".");let r;s&&(n=t.parseExpression(n)),r=a&&"function"==typeof a?a:o?t.caseInsensitiveSort:t.defaultCompare;const c=e.sort((e,i)=>n?s?r(t.getValue(e,n),t.getValue(i,n)):e&&i?r(e[n],i[n]):r(e,i):r(e,i));return i?c.reverse():c}transformObject(e,n,i,o,a){const s=t.parseExpression(n);let r=s.pop(),c=t.getValue(e,s);return Array.isArray(c)||(s.push(r),r=null,c=t.getValue(e,s)),c?(t.setValue(e,this.transform(c,r,i,o),s),e):e}multiExpressionTransform(t,e,n,i=!1,o){return e.reverse().reduce((t,e)=>this.transform(t,e,n,i,o),t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Mb({name:"orderBy",type:t,pure:!1}),t})(),R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({providers:[P]}),t})();var I=n("3Pt+"),y=n("kmnG"),k=n("qFsG"),F=n("bTqV");function A(t,e){1&t&&(c.Sb(0,"mat-error"),c.Dc(1," Please enter a valid email address "),c.Rb())}function L(t,e){1&t&&(c.Sb(0,"mat-error"),c.Dc(1," Email is "),c.Sb(2,"strong"),c.Dc(3,"required"),c.Rb(),c.Rb())}function T(t,e){1&t&&(c.Sb(0,"mat-error"),c.Dc(1," Password is "),c.Sb(2,"strong"),c.Dc(3,"required"),c.Rb(),c.Rb())}let E=(()=>{class t{constructor(t,e,n,i,o){this.fb=t,this.adminService=e,this.router=n,this.route=i,this.afAuth=o,this.adminLoginForm=this.fb.group({emailForm:["",[I.n.required,I.n.email]],passwordForm:["",I.n.required]})}ngOnInit(){this.afAuth.signOut()}get email(){return this.adminLoginForm.get("emailForm")}get password(){return this.adminLoginForm.get("passwordForm")}logIn(){this.afAuth.signInWithEmailAndPassword(this.email.value,this.password.value).then(t=>{t.user&&(this.adminService.isLogedin=!0,this.router.navigate(["./main"],{relativeTo:this.route}))}).catch(t=>{console.log("error",t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(I.b),c.Nb(f),c.Nb(h.j),c.Nb(h.a),c.Nb(x.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["jungle-login"]],decls:15,vars:4,consts:[[1,"admin_login_container"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","30px",3,"formGroup","ngSubmit"],[1,"example-full-width"],["matInput","","formControlName","emailForm","placeholder","enter Email"],[4,"ngIf"],["matInput","","formControlName","passwordForm","placeholder","enter Password"],["mat-raised-button","","color","accent"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"form",1),c.ac("ngSubmit",function(){return e.logIn()}),c.Sb(2,"mat-form-field",2),c.Sb(3,"mat-label"),c.Dc(4,"Email"),c.Rb(),c.Ob(5,"input",3),c.Cc(6,A,2,0,"mat-error",4),c.Cc(7,L,4,0,"mat-error",4),c.Rb(),c.Sb(8,"mat-form-field",2),c.Sb(9,"mat-label"),c.Dc(10,"Password"),c.Rb(),c.Ob(11,"input",5),c.Cc(12,T,4,0,"mat-error",4),c.Rb(),c.Sb(13,"button",6),c.Dc(14,"Log in"),c.Rb(),c.Rb(),c.Rb()),2&t&&(c.Db(1),c.kc("formGroup",e.adminLoginForm),c.Db(5),c.kc("ngIf",e.email.hasError("email")&&!e.email.hasError("required")),c.Db(1),c.kc("ngIf",e.email.hasError("required")),c.Db(5),c.kc("ngIf",e.password.hasError("required")))},directives:[I.o,I.i,M.e,M.d,M.f,I.d,y.c,y.f,k.a,I.a,I.h,I.c,i.k,F.a,y.b],styles:[".admin_login_container[_ngcontent-%COMP%]{background-color:#fff;margin:auto;min-height:calc(100% - 371px);width:1280px}@media (min-width:1280px) and (max-width:1399px){.admin_login_container[_ngcontent-%COMP%]{width:1200px}}@media (min-width:960px) and (max-width:1279px){.admin_login_container[_ngcontent-%COMP%]{width:900px}}@media (min-width:600px) and (max-width:959px){.admin_login_container[_ngcontent-%COMP%]{width:600px}}@media (max-width:599px){.admin_login_container[_ngcontent-%COMP%]{width:100%}}"]}),t})(),U=(()=>{class t{constructor(t,e,n,i){this.adminService=t,this.router=e,this.route=n,this.localize=i}canActivate(t,e){if(this.adminService.isLogedin)return!0;{const t=this.localize.translateRoute("/admin");return this.router.navigate([t]),!1}}}return t.\u0275fac=function(e){return new(e||t)(c.Wb(f),c.Wb(h.j),c.Wb(h.a),c.Wb(_.c))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac}),t})();var j=n("ihCf");function $(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",11),c.Ob(1,"img",12),c.Sb(2,"fa-icon",13),c.ac("click",function(){c.uc(t);const e=c.ec();return e.deleteAboutMeImage(null==e.aboutMe?null:e.aboutMe.url)}),c.Rb(),c.Rb()}if(2&t){const t=c.ec();c.Db(1),c.kc("src",null==t.aboutMe?null:t.aboutMe.url,c.xc)}}let N=(()=>{class t{constructor(t){this.adminService=t,this.uploadedFiles=[],this.oldRealImageUrl=""}ngOnInit(){this.getAboutMe("about-me")}uploadAboutMeImage(t){0!==t.target.files.length&&[...t.target.files].forEach(t=>{this.uploadedFiles.push(t),this.adminService.imageRender(t).subscribe(t=>{this.oldRealImageUrl=this.aboutMe.url,this.aboutMe.url=t},t=>{alert(t)})})}deleteAboutMeImage(t){this.aboutMe.url="",this.uploadedFiles=[],t.includes("base64")||(this.oldRealImageUrl=t)}saveAboutMe(t){return Object(o.b)(this,void 0,void 0,function*(){0!==this.uploadedFiles.length&&(this.aboutMe.url=yield this.adminService.uploadFile(this.uploadedFiles[0],r.aboutMeImage)),this.oldRealImageUrl&&this.adminService.deleteImageFromStorage(r.aboutMeImage,this.oldRealImageUrl).then(t=>{});const e={aboutme:{am:this.aboutMe.aboutme.am,en:this.aboutMe.aboutme.en},url:this.aboutMe.url};if(t){const n=`${s.a.aboutMe}/${t}`;yield this.adminService.updateDataBaseDocument(e,n)}else yield this.adminService.setToDataBase(e,s.a.aboutMe)})}getAboutMe(t){this.adminService.getCollectionFromDb(t).subscribe(t=>{this.aboutMe=t[0]})}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(f))},t.\u0275cmp=c.Hb({type:t,selectors:[["jungle-about-me"]],decls:21,vars:3,consts:[[1,"about_me_cont"],[1,"about_me"],["fxLayout","row","fxLayoutAlign","center start","fxLayoutGap","10px"],["fxFlex","40","fxFlex.xs","100",1,"am_desc"],["matInput","","cdkTextareaAutosize","","rows","5",3,"ngModel","ngModelChange"],["for","aboutMeImg",1,"typeFileLabel"],["src","../../../../assets/img/admin/chose-file.gif","alt","chose about me image"],["type","file","id","aboutMeImg",3,"change"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px"],["class","slider_images",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],[1,"slider_images"],["alt","About me image",3,"src"],["icon","times-circle",3,"click"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"h1"),c.Dc(3,"About me"),c.Rb(),c.Sb(4,"div",2),c.Sb(5,"mat-form-field",3),c.Sb(6,"mat-label"),c.Dc(7,"About me in Armenian"),c.Rb(),c.Sb(8,"textarea",4),c.ac("ngModelChange",function(t){return(null==e.aboutMe?null:e.aboutMe.aboutme).am=t}),c.Rb(),c.Rb(),c.Sb(9,"mat-form-field",3),c.Sb(10,"mat-label"),c.Dc(11,"About me in English"),c.Rb(),c.Sb(12,"textarea",4),c.ac("ngModelChange",function(t){return(null==e.aboutMe?null:e.aboutMe.aboutme).en=t}),c.Rb(),c.Rb(),c.Rb(),c.Sb(13,"label",5),c.Dc(14," click on sheep to chose new img "),c.Ob(15,"img",6),c.Rb(),c.Sb(16,"input",7),c.ac("change",function(t){return e.uploadAboutMeImage(t)}),c.Rb(),c.Sb(17,"div",8),c.Cc(18,$,3,1,"div",9),c.Rb(),c.Sb(19,"button",10),c.ac("click",function(){return e.saveAboutMe(null==e.aboutMe?null:e.aboutMe.id)}),c.Dc(20,"Save about me"),c.Rb(),c.Rb(),c.Rb()),2&t&&(c.Db(8),c.kc("ngModel",null==e.aboutMe?null:e.aboutMe.aboutme.am),c.Db(4),c.kc("ngModel",null==e.aboutMe?null:e.aboutMe.aboutme.en),c.Db(6),c.kc("ngIf",""!==(null==e.aboutMe?null:e.aboutMe.url)))},directives:[M.e,M.d,M.f,y.c,M.b,y.f,k.a,j.b,I.a,I.h,I.k,i.k,F.a,C.a],styles:[".about_me_cont[_ngcontent-%COMP%]{width:1280px;background-color:#fff;margin:auto;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media (min-width:1280px) and (max-width:1399px){.about_me_cont[_ngcontent-%COMP%]{width:1200px}}@media (min-width:960px) and (max-width:1279px){.about_me_cont[_ngcontent-%COMP%]{width:900px}}@media (min-width:600px) and (max-width:959px){.about_me_cont[_ngcontent-%COMP%]{width:600px}}@media (max-width:599px){.about_me_cont[_ngcontent-%COMP%]{width:100%}}.about_me_cont[_ngcontent-%COMP%]   .about_me[_ngcontent-%COMP%]{padding:20px;margin-top:20px}.about_me_cont[_ngcontent-%COMP%]   .about_me[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]{width:200px;height:200px;position:relative}.about_me_cont[_ngcontent-%COMP%]   .about_me[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.about_me_cont[_ngcontent-%COMP%]   .about_me[_ngcontent-%COMP%]   .slider_images[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;color:red;cursor:pointer}"]}),t})();var G=n("Xa2L"),q=n("Wp6s");function B(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",23),c.ac("click",function(){return c.uc(t),c.ec().amTitle=""}),c.Ob(1,"fa-icon",24),c.Rb()}}function V(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",23),c.ac("click",function(){return c.uc(t),c.ec().enTitle=""}),c.Ob(1,"fa-icon",24),c.Rb()}}function W(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",23),c.ac("click",function(){return c.uc(t),c.ec().amTitle=""}),c.Ob(1,"fa-icon",24),c.Rb()}}function z(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",25),c.Sb(1,"mat-form-field"),c.Sb(2,"mat-label"),c.Dc(3,"Assortment Armenian name"),c.Rb(),c.Sb(4,"input",26),c.ac("ngModelChange",function(n){c.uc(t);const i=e.index;return c.ec().assortmentsImages[i].name.am=n}),c.Rb(),c.Rb(),c.Sb(5,"mat-form-field"),c.Sb(6,"mat-label"),c.Dc(7,"Assortment English name"),c.Rb(),c.Sb(8,"input",26),c.ac("ngModelChange",function(n){c.uc(t);const i=e.index;return c.ec().assortmentsImages[i].name.en=n}),c.Rb(),c.Rb(),c.Sb(9,"mat-form-field"),c.Sb(10,"mat-label"),c.Dc(11,"Assortment price"),c.Rb(),c.Sb(12,"input",27),c.ac("ngModelChange",function(n){c.uc(t);const i=e.index;return c.ec().assortmentsImages[i].price=n}),c.Rb(),c.Rb(),c.Sb(13,"div",28),c.Ob(14,"img",29),c.Sb(15,"fa-icon",30),c.ac("click",function(){c.uc(t);const n=e.index,i=e.$implicit;return c.ec().deleteAssortmentImage(n,i.url)}),c.Rb(),c.Sb(16,"input",31),c.ac("change",function(){c.uc(t);const n=e.index;return c.ec().makeMainImage(n)}),c.Rb(),c.Rb(),c.Rb()}if(2&t){const t=e.$implicit,n=e.index,i=c.ec();c.Db(4),c.lc("name","inputArm",n,""),c.kc("ngModel",i.assortmentsImages[n].name.am),c.Db(4),c.lc("name","inputEn",n,""),c.kc("ngModel",i.assortmentsImages[n].name.en),c.Db(4),c.lc("name","inputPrice",n,""),c.kc("ngModel",i.assortmentsImages[n].price),c.Db(2),c.kc("src",t.url,c.xc),c.Db(2),c.kc("checked",t.main)}}function H(t,e){1&t&&c.Ob(0,"mat-spinner",34)}function J(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",32),c.ac("click",function(){return c.uc(t),c.ec().addNewAssortmentFunc()}),c.Dc(1," Add new assortment "),c.Cc(2,H,1,0,"mat-spinner",33),c.Rb()}if(2&t){const t=c.ec();c.Db(2),c.kc("ngIf",t.isLoading)}}function X(t,e){1&t&&c.Ob(0,"mat-spinner",34)}function K(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",32),c.ac("click",function(){return c.uc(t),c.ec().addNewAssortmentFunc()}),c.Dc(1," Update assortment "),c.Cc(2,X,1,0,"mat-spinner",33),c.Rb()}if(2&t){const t=c.ec();c.Db(2),c.kc("ngIf",t.isLoading)}}function Q(t,e){if(1&t&&c.Ob(0,"input",43),2&t){const t=c.ec().$implicit;c.kc("checked",t.main)}}function Y(t,e){if(1&t&&(c.Sb(0,"div",39),c.Sb(1,"mat-card",40),c.Sb(2,"mat-card-header"),c.Cc(3,Q,1,1,"input",41),c.Sb(4,"mat-card-title"),c.Dc(5),c.Rb(),c.Sb(6,"mat-card-title"),c.Dc(7),c.Rb(),c.Sb(8,"mat-card-subtitle"),c.Dc(9),c.Rb(),c.Rb(),c.Ob(10,"img",42),c.Rb(),c.Rb()),2&t){const t=e.$implicit;c.Db(3),c.kc("ngIf",t.main),c.Db(2),c.Ec(t.name.am),c.Db(2),c.Ec(t.name.en),c.Db(2),c.Ec(t.price),c.Db(1),c.kc("src",t.url,c.xc)}}function Z(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",35),c.Sb(1,"button",36),c.ac("click",function(){c.uc(t);const n=e.$implicit,i=c.ec(),o=c.rc(2);return i.editAssortment(n,o)}),c.Dc(2," Edit "),c.Rb(),c.Sb(3,"h3"),c.Dc(4,"Title Armenian"),c.Rb(),c.Sb(5,"p"),c.Dc(6),c.Rb(),c.Sb(7,"h3"),c.Dc(8,"Title English"),c.Rb(),c.Sb(9,"p"),c.Dc(10),c.Rb(),c.Sb(11,"h3"),c.Dc(12,"Description Armenian"),c.Rb(),c.Sb(13,"p"),c.Dc(14),c.Rb(),c.Sb(15,"h3"),c.Dc(16,"Description English"),c.Rb(),c.Sb(17,"p"),c.Dc(18),c.Rb(),c.Sb(19,"h3"),c.Dc(20,"price"),c.Rb(),c.Sb(21,"p"),c.Dc(22),c.Rb(),c.Sb(23,"h3"),c.Dc(24,"puctures"),c.Rb(),c.Sb(25,"div",37),c.Cc(26,Y,11,5,"div",38),c.Rb(),c.Rb()}if(2&t){const t=e.$implicit;c.Db(6),c.Ec(t.title.am),c.Db(4),c.Ec(t.title.en),c.Db(4),c.Ec(t.description.am),c.Db(4),c.Ec(t.description.en),c.Db(4),c.Ec(t.price),c.Db(4),c.kc("ngForOf",t.urls)}}const tt=[{path:"",component:E},{path:"main",component:S},{path:"about",component:N},{path:"assortments",component:(()=>{class t{constructor(t,e){this.adminService=t,this.platformId=e,this.assortments=[],this.assortmentsImages=[],this.amTitle="",this.enTitle="",this.enDescription="",this.amDescription="",this.uploadedFiles=[],this.price="",this.deletedUrls=[],this.idForUpdate=null,this.isLoading=!1}ngOnInit(){Object(i.r)(this.platformId)&&this.getAssortments(s.a.assortments)}getAssortments(t){this.adminService.getCollectionFromDb(t).subscribe(t=>{this.assortments=[...t]})}uploadAssortmentFiles(t,e){0!==t.target.files.length&&[...t.target.files].forEach(t=>{this.uploadedFiles.push(t),this.adminService.imageRender(t).subscribe(t=>{this.assortmentsImages.push({url:t,main:!1,name:{am:"",en:""},price:""})},t=>{alert(t)})})}manageUrls(){return new Promise(t=>{Promise.all(this.uploadedFiles.map((t,e)=>this.adminService.uploadFile(t,r.assortmentImage))).then(e=>{const n=this.assortmentsImages.length-this.uploadedFiles.length;e.forEach((t,e)=>{this.assortmentsImages[e+n].url=t}),t("")})})}addNewAssortmentFunc(){return Object(o.b)(this,void 0,void 0,function*(){this.isLoading=!0,""!==this.amTitle&&""!==this.enTitle&&""!==this.enDescription&&""!==this.amDescription&&""!==this.price&&(0!==this.uploadedFiles.length&&(yield this.manageUrls()),this.addNewAssortment={title:{am:this.amTitle?this.amTitle:"",en:this.enTitle?this.enTitle:""},description:{am:this.amDescription,en:this.enDescription},price:this.price,urls:this.assortmentsImages},null===this.idForUpdate?this.adminService.setToDataBase(this.addNewAssortment,s.a.assortments).then(t=>{this.isLoading=!1,this.resetForm()}):this.adminService.updateDataBaseDocument(this.addNewAssortment,`${s.a.assortments}/${this.idForUpdate}`).then(t=>{0!==this.deletedUrls.length?this.deletedUrls.forEach(t=>{this.adminService.deleteImageFromStorage(r.assortmentImage,t).then(t=>{this.isLoading=!1,this.resetForm()})}):(this.isLoading=!1,this.resetForm())}))})}resetForm(){this.amTitle="",this.enTitle="",this.amDescription="",this.enDescription="",this.price="",this.assortmentsImages=[],this.idForUpdate=null,this.assortmentUploadInput="",this.uploadedFiles=[],this.deletedUrls=[]}editAssortment(t,e){this.amTitle=t.title.am,this.enTitle=t.title.en,this.amDescription=t.description.am,this.enDescription=t.description.en,this.price=t.price,this.assortmentsImages=[...t.urls],this.idForUpdate=t.id,e.scrollIntoView()}makeMainImage(t){this.assortmentsImages.forEach(t=>{t.main=!1}),this.assortmentsImages[t].main=!0}deleteAssortment(t,e,n){}deleteAssortmentImage(t,e){const n=this.assortmentsImages.length-this.uploadedFiles.length;this.assortmentsImages.splice(t,1),e.includes("base64")?this.uploadedFiles.splice(t-n,1):this.deletedUrls.push(e)}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(f),c.Nb(c.C))},t.\u0275cmp=c.Hb({type:t,selectors:[["jungle-assortment"]],decls:45,vars:14,consts:[[1,"assortment_cont"],[1,"add_new_assortment_cont"],["formDiv",""],[1,"add_new_assortment"],[1,"assortment_title"],[1,"am_title"],["matInput","","type","text",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"en_title"],["fxLayout","row wrap","fxLayoutAlign","center center","fxLayoutGap","20px",1,"assortment_desc"],[1,"am_desc"],["matInput","","cdkTextareaAutosize","","rows","5",3,"ngModel","ngModelChange"],[1,"en_desc"],[1,"price"],[1,"upload_assortment_img"],["for","assortmentImg",1,"typeFileLabel"],["src","../../../../assets/img/admin/chose-file.gif","alt",""],["type","file","id","assortmentImg",3,"multiple","ngModel","ngModelChange","change"],["fxLayout","row wrap","fxLayoutAlign","center center","fxLayoutGap","20px"],["fxLayout","column","fxLayoutAlign","center center","class","delete_assortment_image_div",4,"ngFor","ngForOf"],["class","add_new_assortment_button","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"assortment_show_part_cont"],["class","assortment_show_div",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["icon","times-circle"],["fxLayout","column","fxLayoutAlign","center center",1,"delete_assortment_image_div"],["matInput","","type","text",3,"name","ngModel","ngModelChange"],["matInput","","type","number",3,"name","ngModel","ngModelChange"],[1,"images_div"],["alt","",3,"src"],["icon","times-circle",3,"click"],["type","checkbox",3,"checked","change"],["mat-raised-button","","color","primary",1,"add_new_assortment_button",3,"click"],["color","accent",4,"ngIf"],["color","accent"],[1,"assortment_show_div"],["mat-raised-button","","color","accent",3,"click"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px"],["class","assortment_show_image_div",4,"ngFor","ngForOf"],[1,"assortment_show_image_div"],[1,"example-card"],["type","checkbox",3,"checked",4,"ngIf"],["mat-card-image","","alt","picture",3,"src"],["type","checkbox",3,"checked"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"div",1,2),c.Sb(3,"h1"),c.Dc(4,"Add new assortment"),c.Rb(),c.Sb(5,"div",3),c.Sb(6,"div",4),c.Sb(7,"mat-form-field",5),c.Sb(8,"mat-label"),c.Dc(9,"Title Armenian "),c.Rb(),c.Sb(10,"input",6),c.ac("ngModelChange",function(t){return e.amTitle=t}),c.Rb(),c.Cc(11,B,2,0,"button",7),c.Rb(),c.Sb(12,"mat-form-field",8),c.Sb(13,"mat-label"),c.Dc(14,"Title English "),c.Rb(),c.Sb(15,"input",6),c.ac("ngModelChange",function(t){return e.enTitle=t}),c.Rb(),c.Cc(16,V,2,0,"button",7),c.Rb(),c.Rb(),c.Sb(17,"div",9),c.Sb(18,"mat-form-field",10),c.Sb(19,"mat-label"),c.Dc(20,"Description in Armenian"),c.Rb(),c.Sb(21,"textarea",11),c.ac("ngModelChange",function(t){return e.amDescription=t}),c.Rb(),c.Rb(),c.Sb(22,"mat-form-field",12),c.Sb(23,"mat-label"),c.Dc(24,"Description in English"),c.Rb(),c.Sb(25,"textarea",11),c.ac("ngModelChange",function(t){return e.enDescription=t}),c.Rb(),c.Rb(),c.Rb(),c.Sb(26,"div",13),c.Sb(27,"mat-form-field",5),c.Sb(28,"mat-label"),c.Dc(29,"Price in AMD "),c.Rb(),c.Sb(30,"input",6),c.ac("ngModelChange",function(t){return e.price=t}),c.Rb(),c.Cc(31,W,2,0,"button",7),c.Rb(),c.Rb(),c.Sb(32,"div",14),c.Sb(33,"label",15),c.Dc(34," click on sheep to chose new img "),c.Ob(35,"img",16),c.Rb(),c.Sb(36,"input",17),c.ac("ngModelChange",function(t){return e.assortmentUploadInput=t})("change",function(t){return e.uploadAssortmentFiles(t,"assortment-img")}),c.Rb(),c.Sb(37,"div",18),c.Cc(38,z,17,8,"div",19),c.Rb(),c.Rb(),c.Rb(),c.Cc(39,J,3,1,"button",20),c.Cc(40,K,3,1,"button",20),c.Rb(),c.Sb(41,"div",21),c.Sb(42,"h1"),c.Dc(43,"Existing assortment"),c.Rb(),c.Cc(44,Z,27,6,"div",22),c.Rb(),c.Rb()),2&t&&(c.Db(10),c.kc("ngModel",e.amTitle),c.Db(1),c.kc("ngIf",e.amTitle),c.Db(4),c.kc("ngModel",e.enTitle),c.Db(1),c.kc("ngIf",e.enTitle),c.Db(5),c.kc("ngModel",e.amDescription),c.Db(4),c.kc("ngModel",e.enDescription),c.Db(5),c.kc("ngModel",e.price),c.Db(1),c.kc("ngIf",e.amTitle),c.Db(5),c.kc("multiple",!0)("ngModel",e.assortmentUploadInput),c.Db(2),c.kc("ngForOf",e.assortmentsImages),c.Db(1),c.kc("ngIf",null===e.idForUpdate),c.Db(1),c.kc("ngIf",null!==e.idForUpdate),c.Db(4),c.kc("ngForOf",e.assortments))},directives:[y.c,y.f,k.a,I.a,I.h,I.k,i.k,M.e,M.d,M.f,j.b,i.j,F.a,y.g,C.a,I.l,G.b,q.a,q.c,q.g,q.f,q.d],styles:[".assortment_cont[_ngcontent-%COMP%]{width:1280px;background-color:#fff;margin:auto;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media (min-width:1280px) and (max-width:1399px){.assortment_cont[_ngcontent-%COMP%]{width:1200px}}@media (min-width:960px) and (max-width:1279px){.assortment_cont[_ngcontent-%COMP%]{width:900px}}@media (min-width:600px) and (max-width:959px){.assortment_cont[_ngcontent-%COMP%]{width:600px}}@media (max-width:599px){.assortment_cont[_ngcontent-%COMP%]{width:100%}}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]{padding:20px;margin:20px 0;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .assortment_title[_ngcontent-%COMP%]   .am_title[_ngcontent-%COMP%]{margin-right:30px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .assortment_desc[_ngcontent-%COMP%]   .am_desc[_ngcontent-%COMP%], .assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .assortment_desc[_ngcontent-%COMP%]   .en_desc[_ngcontent-%COMP%]{width:40%;min-width:200px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]{width:200px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]   .images_div[_ngcontent-%COMP%]{position:relative;height:200px;padding:5px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]   .images_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #ddd;border-radius:4px}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]   .images_div[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;color:red;cursor:pointer}.assortment_cont[_ngcontent-%COMP%]   .add_new_assortment_cont[_ngcontent-%COMP%]   .delete_assortment_image_div[_ngcontent-%COMP%]   .images_div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;left:5px;bottom:10px}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]{padding:20px}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]{padding:20px;margin:20px 0;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:20px}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]   .assortment_show_image_div[_ngcontent-%COMP%]{width:250px;position:relative}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]   .assortment_show_image_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px}.assortment_cont[_ngcontent-%COMP%]   .assortment_show_part_cont[_ngcontent-%COMP%]   .assortment_show_div[_ngcontent-%COMP%]   .assortment_show_image_div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;left:5px;bottom:10px}button[_ngcontent-%COMP%]{position:relative}  mat-spinner{position:absolute!important;top:0;left:0;bottom:0;right:0;margin:auto}  mat-spinner,   mat-spinner svg{width:20px!important;height:20px!important}"]}),t})()}];let et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({providers:[U],imports:[[i.c,h.m.forChild(tt),v.b.forChild(),D.a,R,I.e]]}),t})()}}]);